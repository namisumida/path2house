function init(){function t(t){for(var e=t.sort(function(t,e){return e.count-t.count}),r=[],n=0;n<e.length;n++)r.push(e[n].experience);return r}function n(r){if(v)var t=dataset_ind.sort(function(t,e){return e[r]-t[r]});else if(b){var n=E[N.indexOf(r)];t=dataset_ind.sort(function(t,e){return(e.state==n)-(t.state==n)})}for(var a=0;a<4;a++)o.selectAll("#"+M[a]).data(t.filter(function(t){return 1==t[M[a]]})).attr("cx",function(t,e){return _+i+d*Math.floor(e/g)}).attr("cy",function(t,e){return l+p+(10+d*g)*a+d*(e%g)});for(a=0;a<4;a++)o.selectAll("#"+L[a]).data(t.filter(function(t){return 1==t[L[a]]})).attr("cx",function(t,e){return _+i+d*Math.floor(e/g)}).attr("cy",function(t,e){return l+2*p+4*(g*d+10)+margin_btwn+(g*d+10)*a+d*(e%g)});for(a=0;a<15;a++)o.selectAll("#"+C[a]).data(t.filter(function(t){return 1==t[C[a]]})).attr("cx",function(t,e){return _+i+d*Math.floor(e/g)}).attr("cy",function(t,e){return l+3*p+8*(g*d+10)+2*margin_btwn+(g*d+10)*a+d*(e%g)});for(a=0;a<5;a++)o.selectAll("#"+D[a]).data(t.filter(function(t){return 1==t[D[a]]})).attr("cx",function(t,e){return _+i+d*Math.floor(e/g)}).attr("cy",function(t,e){return l+4*p+23*(g*d+10)+3*margin_btwn+(g*d+10)*a+d*(e%g)});o.selectAll(".memberDots").style("fill",function(t){return v&1==t[r]?I:b&t.state==n?x:k})}function a(t,s){t.each(function(){for(var t,e=d3.select(this),r=e.text().split(/\s+/).reverse(),n=[],a=0,o=e.attr("x"),l=e.attr("y"),i=e.text(null).append("tspan").attr("x",o).attr("y",l).attr("dy","0em");t=r.pop();)n.push(t),i.text(n.join(" ")),i.node().getComputedTextLength()>s&&(n.pop(),i.text(n.join(" ")),n=[t],i=e.append("tspan").attr("x",o).attr("y",l).attr("dy",1.3*++a+0+"em").text(t))})}function e(o,l){function r(t){if(!t)return!1;!function(t){for(var e=0;e<t.length;e++)t[e].classList.remove("autocomplete-active")}(t),s>=t.length&&(s=0),s<0&&(s=t.length-1),t[s].classList.add("autocomplete-active"),t[s].style.color="black",t[s].style.backgroundColor=x}function i(t){for(var e=document.getElementsByClassName("autocomplete-items"),r=0;r<e.length;r++)t!=e[r]&&t!=o&&e[r].parentNode.removeChild(e[r])}var s;o.addEventListener("input",function(t){var e,r,n,a=this.value;if(i(),!a)return!1;for(s=-1,(e=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),e.style.width=d3.select(".searchbar-input").style("width"),e.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(e),n=0;n<l.length;n++)l[n].substr(0,a.length).toUpperCase()==a.toUpperCase()&&((r=document.createElement("DIV")).innerHTML="<strong>"+l[n].substr(0,a.length)+"</strong>",r.innerHTML+=l[n].substr(a.length),r.innerHTML+='<input type="hidden" value="'+l[n]+'">',r.addEventListener("click",function(t){o.value=this.getElementsByTagName("input")[0].value,i(),l==N?(c(o.value),document.getElementById("searchbar-state").value=""):(u(o.value),document.getElementById("searchbar-rep").value="")}),e.appendChild(r))}),o.addEventListener("keydown",function(t){var e=document.getElementById(this.id+"autocomplete-list");e&&(e=e.getElementsByTagName("div")),40==t.keyCode?(old=s,s++,r(e),-1<old&&(e[old].style.backgroundColor=d3.color("#fff"))):38==t.keyCode?(old=s,s--,r(e),-1<old&&(e[old].style.backgroundColor=d3.color("#fff"))):13==t.keyCode&&(t.preventDefault(),-1<s&&e&&e[s].click())}),document.addEventListener("click",function(t){i(t.target)})}function c(t){o.selectAll(".smallLabels").style("fill","black").style("font-weight",400),y=E[N.indexOf(t)],v=!(b=!0),n(t)}function u(e){o.selectAll(".smallLabels").style("fill","black").style("font-weight",400),o.selectAll(".memberDots").style("fill",function(t){return v&1==t[y]?I:b&t.state==y?x:k}),h=e,o.selectAll(".memberDots").filter(function(t){return t.full_name==e}).style("fill",A)}var o=d3.select("#chart-svg"),r=document.getElementById("chart-svg").getBoundingClientRect().width,l=margin_bottom=margin_btwn=20,i=105,s=5,d=12,f=Math.floor((r-i-20)/d),g=Math.ceil(219/f),m=Math.ceil(219/g),p=20,_=margin_right=(r-i-m*d)/2,w=l+4*p+28*(g*d+10)+3*margin_btwn+margin_bottom;document.getElementById("chart-svg").style.height=w;var v,b,h,y,k=d3.color("#377668"),I=d3.color("#A45A25"),A=d3.color("#D1A730"),x=d3.color("#743D47"),M=t(dataset_counts.slice(0,4)),L=t(dataset_counts.slice(4,8)),C=t(dataset_counts.slice(8,23)),D=t(dataset_counts.slice(23,28)),N=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","District of Columbia","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],E=["AL","AK","AZ","AR","CA","CO","CT","DL","DC","FL","GA","HI","ID","IL","IN","IA","KS","KT","LA","MA","MD","MA","MI","MN","MS","MO","MN","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RH","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];e(document.getElementById("searchbar-state"),N);for(var B=[],O=0;O<dataset_ind.length;O++)B.push(dataset_ind[O].full_name);e(document.getElementById("searchbar-rep"),B),y="",function(){o.selectAll(".gBigLabels").data(["COLLEGE","GRADUATE SCHOOL","CAREER","POLITICAL OFFICE"]).enter().append("text").attr("class","bigLabels").attr("x",_).attr("y",function(t,e){return 0==e?l+10:1==e?l+p+4*(g*d+10)+margin_btwn:2==e?l+2*p+8*(g*d+10)+2*margin_btwn:3==e?l+3*p+23*(g*d+10)+3*margin_btwn:void 0}).text(function(t){return t});for(var r=0;r<4;r++)o.selectAll("collegeDots").data(dataset_ind.filter(function(t){return 1==t[M[r]]})).enter().append("circle").attr("class","memberDots").attr("id",function(t){return M[r]}).attr("cx",function(t,e){return _+i+d*Math.floor(e/g)}).attr("cy",function(t,e){return l+p+(10+d*g)*r+d*(e%g)}).attr("r",s);for(o.selectAll("labels").data(["Public school","Private school","Elite school","No Bachelor's degree"]).enter().append("text").attr("class","smallLabels").text(function(t){return t}).attr("x",_).attr("y",function(t,e){return l+p+d*(g/3)+(10+d*g)*e}).call(a,i-20),r=0;r<4;r++)o.selectAll("gradDots").data(dataset_ind.filter(function(t){return 1==t[L[r]]})).enter().append("circle").attr("class","memberDots").attr("id",function(t){return L[r]}).attr("cx",function(t,e){return _+i+d*Math.floor(e/g)}).attr("cy",function(t,e){return l+2*p+4*(g*d+10)+margin_btwn+(g*d+10)*r+d*(e%g)}).attr("r",s);for(o.selectAll("labels").data(["Law school","Masters","Medical school","Doctorate"]).enter().append("text").attr("class","smallLabels").text(function(t){return t}).attr("x",_).attr("y",function(t,e){return l+2*p+4*(g*d+10)+margin_btwn+d*(g/3)+(10+d*g)*e}).call(a,i-20),r=0;r<15;r++)o.selectAll("workDots").data(dataset_ind.filter(function(t){return 1==t[C[r]]})).enter().append("circle").attr("class","memberDots").attr("id",function(t){return C[r]}).attr("cx",function(t,e){return _+i+d*Math.floor(e/g)}).attr("cy",function(t,e){return l+3*p+8*(g*d+10)+2*margin_btwn+(g*d+10)*r+d*(e%g)}).attr("r",s);for(o.selectAll("labels").data(["Business/ management","Private law","Military","Education","Nonprofits & unions","Medicine","Real estate","Farming/ ranching","Media","Lobbying/ activism","Blue-collar/ service job","Science/ engineering","Law enforcement","Sports","Religious leader"]).enter().append("text").attr("class","smallLabels").text(function(t){return t}).attr("x",_).attr("y",function(t,e){return l+3*p+8*(g*d+10)+2*margin_btwn+d*(g/3)+(10+d*g)*e}).call(a,i-20),r=0;r<5;r++)o.selectAll("govDots").data(dataset_ind.filter(function(t){return 1==t[D[r]]})).enter().append("circle").attr("class","memberDots").attr("id",function(t){return D[r]}).attr("cx",function(t,e){return _+i+d*Math.floor(e/g)}).attr("cy",function(t,e){return l+4*p+23*(g*d+10)+3*margin_btwn+(g*d+10)*r+d*(e%g)}).attr("r",s);o.selectAll("labels").data(["State legislature","Local government","No previous office","Federal or state office","Public lawyer or judge"]).enter().append("text").attr("class","smallLabels").text(function(t){return t}).attr("x",_).attr("y",function(t,e){return l+4*p+23*(g*d+10)+3*margin_btwn+d*(g/3)+(10+d*g)*e}).call(a,i-20),o.selectAll(".memberDots").on("mouseover",function(){var t,e,r;t=d3.select(this),e=parseInt(t.attr("cx")),r=parseInt(t.attr("cy")),t.style("fill",A),o.append("rect").attr("class","mouseover_back").attr("x",e+10).attr("y",r).attr("width",100).attr("height",20).style("fill","white"),o.append("text").attr("class","mouseover_text").text(function(){return t.data()[0].full_name+" ("+t.data()[0].state+")"}).attr("x",e+15).attr("y",r+10).call(a,95)}).on("mouseout",function(){d3.select(this).style("fill",function(t){return 1==t[y]?I:t.state==y?x:t.full_name==h?A:k}),o.selectAll(".mouseover_text").remove(),o.selectAll(".mouseover_back").remove()}),o.selectAll(".smallLabels").on("click",function(){o.selectAll(".smallLabels").style("fill","black").style("font-weight",400),o.selectAll(".memberDots").style("fill",k);var t,e,r=d3.select(this);r.text(),r.style("font-weight",500).style("fill",I),t=r.data()[0],e=t,y=["college_public","college_private","college_elite","college_none","edu_law","edu_masters","edu_med","edu_doctorate","work_business","work_privatelaw","work_military","work_education","work_nonprofits","work_medicine","work_realestate","work_farming","work_media","work_lobbying","work_bluecollar","work_science","work_lawenforcement","work_sports","work_religiousleader","gov_stateleg","gov_local","gov_none","gov_fedstate","gov_publiclawyerjudge"][["Public school","Private school","Elite school","No Bachelor's degree","Law school","Masters","Medical school","Doctorate","Business/ management","Private law","Military","Education","Nonprofits & unions","Medicine","Real estate","Farming/ ranching","Media","Lobbying/ activism","Blue-collar/ service job","Science/ engineering","Law enforcement","Sports","Religious leader","State legislature","Local government","No previous office","Federal or state office","Public lawyer or judge"].indexOf(e)],v=!(h=!1),n(y)})}(),window.addEventListener("resize",function(){})}function rowConverter1(t){return{full_name:t.full_name,state:t.state,edu_med:parseInt(parseInt(t.edu_med)),edu_law:parseInt(t.edu_law),edu_masters:parseInt(t.edu_masters),edu_doctorate:parseInt(t.edu_doctorate),work_bluecollar:parseInt(t.work_bluecollar),work_business:parseInt(t.work_business),work_education:parseInt(t.work_education),work_farming:parseInt(t.work_farming),work_lawenforcement:parseInt(t.work_lawenforcement),work_lobbying:parseInt(t.work_lobbying),work_media:parseInt(t.work_media),work_medicine:parseInt(t.work_medicine),work_military:parseInt(t.work_military),work_nonprofits:parseInt(t.work_nonprofits),work_privatelaw:parseInt(t.work_privatelaw),work_realestate:parseInt(t.work_realestate),work_religiousleader:parseInt(t.work_religiousleader),work_science:parseInt(t.work_science),work_sports:parseInt(t.work_sports),gov_fedstate:parseInt(t.gov_fedstate),gov_local:parseInt(t.gov_local),gov_none:parseInt(t.gov_none),gov_publiclawyerjudge:parseInt(t.gov_publiclawyerjudge),gov_stateleg:parseInt(t.gov_stateleg),new:parseInt(t.new),gender:t.gender,party:t.party,college_none:parseInt(t.college_none),college_public:parseInt(t.college_public),college_private:parseInt(t.college_private),college_elite:parseInt(t.college_elite)}}function rowConverter2(t){return{experience:t.experience,count:parseInt(t.count)}}d3.csv("Data/merged.csv",rowConverter1,function(e){d3.csv("Data/counts.csv",rowConverter2,function(t){dataset_ind=e,dataset_counts=t,init()})});